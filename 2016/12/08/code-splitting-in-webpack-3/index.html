<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Code Splitting in Webpack - 3 CSS Bundle · Learn, Make, Share, Live</title><meta name="description" content="Code Splitting in Webpack - 3 CSS Bundle - Sam Zhao"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato|Sintony"><link rel="search" type="application/opensearchdescription+xml" href="https://zhaoshengjun.github.io/atom.xml" title="Learn, Make, Share, Live"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://twitter.com/samzhaocn" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/zhaoshengjun" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Code Splitting in Webpack - 3 CSS Bundle</h1><div class="post-info">Dec 8, 2016</div><div class="post-content"><p>As I promised in part 2, this time we will take a look at how to separate <code>css</code> into a single file.</p>
<a id="more"></a>
<p>If you use <code>webpack</code> before, you know that <code>webpack</code> treating <strong>everything</strong> as an dependency, not just <code>js</code>, but <strong>everything</strong>. This is the mighty power of  <code>webpack</code>.</p>
<p>So if you want to use <code>css</code> or <code>sass</code> in your code, you need to specify like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'bootstrap.css'</span>);              <span class="comment">//css</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'bootstrap.sass'</span>);             <span class="comment">//sass</span></div></pre></td></tr></table></figure>
<p>Then you need to use loader to convert these files because <code>webpack</code> default will treat everything as <code>js</code> . </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//webpack.config.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">  <span class="built_in">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [&#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</div><div class="line">      <span class="attr">loaders</span>:[<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</div><div class="line">    &#125;]</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<div class="tips"><br>Under the hood, <code>webpack</code> will use <code>acron</code> to generate AST (abstract syntax tree) so it can analyze the code. That’s how <code>webpack</code> generate dependency trees, optimize the code etc.<br><br>If we don’t use loader to convert the non -<code>js</code> files, the AST will fail. Hence bundle errors.<br><br></div>

<p>Also by default, <code>webpack</code> will load the <code>css</code> as  an <code>js</code> function and they will scatter in different places just as other functions. As tradition, we tend to put them into a single file. <code>webpack</code> also allow us to do that by using <code>extract-text-webpack-plugin</code>.</p>
<blockquote>
<p>See the pattern? To <code>webpack</code>, everything is a plugin :rocket:</p>
</blockquote>
<p>Let’s take a look at the example <code>webpack</code> provided in its <a href="https://github.com/webpack/webpack/tree/master/examples/code-splitted-css-bundle" target="_blank" rel="external">repo</a>.</p>
<h2 id="The-example"><a href="#The-example" class="headerlink" title="The example"></a>The example</h2><p>In this example, we have a <code>example.js</code>, which will use <code>style.css</code>  (which will style the whole html page’s <code>background</code>) and also <code>chunk.js</code>. In <code>chunk.js</code>, it will use <code>style2.css</code> to change the <code>background</code> of class <code>xyz</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// example.js</span></div><div class="line"><span class="built_in">require</span>(<span class="string">"./style.css"</span>);</div><div class="line"><span class="built_in">require</span>([<span class="string">"./chunk"</span>]);</div><div class="line"></div><div class="line"><span class="comment">// chunk.js</span></div><div class="line"><span class="built_in">require</span>(<span class="string">"./style2.css"</span>);</div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* style.css */</span></div><div class="line">* &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(image.png);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* style2.css */</span></div><div class="line"><span class="selector-class">.xyz</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(image2.png);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Normally we will use the configuration similar to this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>: <span class="string">'./example.js'</span>,</div><div class="line">	<span class="attr">output</span>: &#123;</div><div class="line">		<span class="attr">path</span>: <span class="string">'./js'</span>,</div><div class="line">		<span class="attr">filename</span>: <span class="string">'output.js'</span></div><div class="line">	&#125;,</div><div class="line">	<span class="attr">module</span>: &#123;</div><div class="line">		<span class="attr">loaders</span>: [&#123;</div><div class="line">			<span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">			<span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</div><div class="line">			<span class="attr">loaders</span>: [<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]</div><div class="line">		&#125;, &#123;</div><div class="line">			<span class="attr">test</span>: <span class="regexp">/\.png$/</span>,</div><div class="line">			<span class="attr">loader</span>: <span class="string">"file-loader"</span></div><div class="line">		&#125;]</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>The result will be like the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Hash: 1d9e7e0e92f9bcc3c3e9</div><div class="line">Version: webpack 2.1.0-beta.27</div><div class="line">Time: 705ms</div><div class="line">                               Asset       Size  Chunks             Chunk Names</div><div class="line">ce21cbdd9b894e6af794813eb3fdaf60.png  119 bytes          [emitted]</div><div class="line">                         0.output.js    1.54 kB       0  [emitted]</div><div class="line">                           output.js    15.6 kB       1  [emitted]  main</div><div class="line">   [3] ./chunk.js 26 bytes &#123;0&#125; [built]</div><div class="line">   [6] ./example.js 70 bytes &#123;1&#125; [built]</div><div class="line">    + 8 hidden modules</div></pre></td></tr></table></figure>
<p><code>webpack</code> will generate <code>js</code> file, but not <code>css</code> file by default.</p>
<p>If we want to generate a separate <code>css</code> file, we need to modify our configuration file to this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>: <span class="string">'./example.js'</span>,</div><div class="line">	<span class="attr">output</span>: &#123;</div><div class="line">		<span class="attr">path</span>: <span class="string">'./js'</span>,</div><div class="line">		<span class="attr">filename</span>: <span class="string">'output.js'</span></div><div class="line">	&#125;,</div><div class="line">	<span class="attr">module</span>: &#123;</div><div class="line">		<span class="attr">loaders</span>: [</div><div class="line">			&#123;</div><div class="line">				<span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">				<span class="attr">loader</span>: ExtractTextPlugin.extract(&#123;</div><div class="line">					<span class="attr">notExtractLoader</span>: <span class="string">"style-loader"</span>,</div><div class="line">					<span class="attr">loader</span>: <span class="string">"css-loader"</span></div><div class="line">				&#125;)</div><div class="line">			&#125;,</div><div class="line">			&#123; <span class="attr">test</span>: <span class="regexp">/\.png$/</span>, <span class="attr">loader</span>: <span class="string">"file-loader"</span> &#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	<span class="attr">plugins</span>: [</div><div class="line">		<span class="keyword">new</span> ExtractTextPlugin(&#123;</div><div class="line">			<span class="attr">filename</span>: <span class="string">"style.css"</span></div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Now if we run command <code>webpack</code>, we will get the following result</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Hash: 73d0a46a3b928c448a64</div><div class="line">Version: webpack 2.1.0-beta.27</div><div class="line">Time: 4691ms</div><div class="line">                               Asset       Size  Chunks             Chunk Names</div><div class="line">ce21cbdd9b894e6af794813eb3fdaf60.png  119 bytes          [emitted]</div><div class="line">                         0.output.js  601 bytes       0  [emitted]</div><div class="line">                           output.js    7.17 kB       1  [emitted]  main</div><div class="line">                           style.css   65 bytes       1  [emitted]  main</div><div class="line">   [1] ./chunk.js 26 bytes &#123;0&#125; [built]</div><div class="line">   [2] ./example.js 70 bytes &#123;1&#125; [built]</div><div class="line">    + 5 hidden modules</div><div class="line">Child extract-text-webpack-plugin:</div><div class="line">        + 3 hidden modules</div></pre></td></tr></table></figure>
<p>There’s our <code>style.css</code> which includes all the styles we defined (to be more precise, it contains all the styles we <strong>used</strong>).</p>
<p>That’s how you do css bundle in <code>webpack</code> !</p>
<p>Happy hacking!</p>
</div></article></div></section><footer><div class="form"><div class="form-left"><h2>Like what you are reading? </h2><p>Get more great tips to build awesome Apps!</p></div><div class="form-right"><form action="//github.us14.list-manage.com/subscribe/post?u=712f35ed21d057d4825f450db&amp;amp;id=4f5765a80a" method="post"><label class="label">Email address</label><input type="email" name="EMAIL" class="input"><button type="submit" class="button">Join the newsletter</button></form><p class="subText">We will NEVER spam you. Promise. </p></div></div><div class="paginator"><a href="/2016/12/07/code-splitting-in-webpack-2/" class="next">NEXT</a></div><div class="copyright"><p>© 2016 <a href="https://zhaoshengjun.github.io">Sam Zhao</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-59912650-3",'auto');ga('send','pageview');</script></body></html>