<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Code Splitting in Webpack - 1 · Learn, Make, Share, Live</title><meta name="description" content="Code Splitting in Webpack - 1 - Sam Zhao"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato|Sintony"><link rel="search" type="application/opensearchdescription+xml" href="https://zhaoshengjun.github.io/atom.xml" title="Learn, Make, Share, Live"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://twitter.com/samzhaocn" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/zhaoshengjun" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Code Splitting in Webpack - 1</h1><div class="post-info">Dec 6, 2016</div><div class="post-content"><h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>We all know that deploy a gigantic <code>bundle.js</code> with our app is not a good option.  Because the first page should be loaded as fast as possible. Otherwise the user will leave the app.  We, developer, should consider to use any possible options to reduce the initial loading time.</p>
<p>Luckily, <code>webpack</code> got you covered!</p>
<a id="more"></a>
<h2 id="The-Solution"><a href="#The-Solution" class="headerlink" title="The Solution"></a>The Solution</h2><p>The solution <code>webpack</code> used is called <code>code splitting</code>. It’s splitting the code into different parts (<code>webpack</code> ‘s term is called <code>chunk</code>). So the individual page will only need to load the parts it needs. If some parts are already loaded, it will only load the missing part, which is much quicker.</p>
<p>The technique <code>webpack</code> uses is to splitting the code when it meets the splitting point. What’s a splitting point? It varies based on the module system you are using:</p>
<ul>
<li>for <code>commonjs</code>, it’s <code>require.ensure(dependencies, callback)</code></li>
<li>for <code>AMD</code>, it’s <code>require(dependencies, callback)</code></li>
<li>for <code>SystemJS</code>, it’s <code>System.import(dependencies)</code> </li>
</ul>
<h2 id="The-Example"><a href="#The-Example" class="headerlink" title="The Example"></a>The Example</h2><p>Let’s take a look at the<code>code-splitting</code>  example from <code>webpack</code> <a href="https://github.com/webpack/webpack/tree/master/examples/code-splitting" target="_blank" rel="external">repo</a>.</p>
<p>Inside <code>node_modules</code> folder, we have 4 files, each one represents a module like we used in everyday development. Outside the <code>node_modules</code> folder, we have a <code>example.js</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//example.js</span></div><div class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"a"</span>);                                   <span class="comment">//1</span></div><div class="line"><span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">"b"</span>);                                   <span class="comment">//2</span></div><div class="line"><span class="built_in">require</span>.ensure([<span class="string">"c"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;               <span class="comment">//3</span></div><div class="line">    <span class="built_in">require</span>(<span class="string">"b"</span>).xyz();                                 <span class="comment">//4</span></div><div class="line">    <span class="keyword">var</span> d = <span class="built_in">require</span>(<span class="string">"d"</span>);                               <span class="comment">//5</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ol>
<li>Load module <code>a</code></li>
<li>Load module <code>b</code></li>
<li>Here comes the <code>require.ensure()</code>, it tells <code>webpack</code> that from this point, we need another chunk to separate the code. This code should include module <code>c</code></li>
<li>In the new chunk, load module <code>b</code>;</li>
<li>in the new chunk load module <code>d</code></li>
</ol>
<p>So if we use the following configuration:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//webpack.config.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>:<span class="string">'./example.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">filename</span>:<span class="string">'output.js'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>and we run command <code>webpack</code> (if you already installed <code>webpack</code> globally), we should get result similiar to the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Hash: 450a9b9be7c7ef4d290f</div><div class="line">Version: webpack 2.1.0-beta.27</div><div class="line">Time: 125ms</div><div class="line">      Asset       Size  Chunks             Chunk Names</div><div class="line">0.output.js  169 bytes       0  [emitted]</div><div class="line">  output.js    5.75 kB       1  [emitted]  main</div><div class="line">   [4] ./example.js 144 bytes &#123;1&#125; [built]</div><div class="line">    + 4 hidden modules</div></pre></td></tr></table></figure>
<p>As we expected, the output are 2 files:</p>
<ul>
<li><p><code>output.js</code> is the initial chunk, which needs to be loaded first. It contains module <code>a</code> and <code>b</code> . The rest is the <code>webpack</code> polyfill.</p>
<blockquote>
<p>This will normally be the <code>js</code> file in your app’s index page.</p>
</blockquote>
</li>
<li><p><code>0.output.js</code> contains module <code>c</code> and <code>d</code>. In our analysis, it should contain <code>b</code> as well, but <code>b</code> has already been loaded so <code>webpack</code> is smart enough to remove it.</p>
<blockquote>
<p>This will normally be the <code>js</code> file in your app’s other page, loaded by routing system. </p>
</blockquote>
</li>
</ul>
<p>There are other tricks to do the code-splitting as well. We’ll look at them in following posts.</p>
<p>Stay tuned!</p>
</div></article></div></section><footer><div class="form"><div class="form-left"><h2>Like what you are reading? </h2><p>Get more great tips to build awesome Apps!</p></div><div class="form-right"><form action="//github.us14.list-manage.com/subscribe/post?u=712f35ed21d057d4825f450db&amp;amp;id=4f5765a80a" method="post"><label class="label">Email address</label><input type="email" name="EMAIL" class="input"><button type="submit" class="button">Join the newsletter</button></form><p class="subText">We will NEVER spam you. Promise. </p></div></div><div class="paginator"><a href="/2016/12/07/code-splitting-in-webpack-2/" class="prev">PREV</a><a href="/2016/12/05/i18n-webpack-plugin/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'samzhaoblog';
var disqus_identifier = '2016/12/06/code-splitting-in-webpack-1/';
var disqus_title = 'Code Splitting in Webpack - 1';
var disqus_url = 'https://zhaoshengjun.github.io/2016/12/06/code-splitting-in-webpack-1/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//samzhaoblog.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 <a href="https://zhaoshengjun.github.io">Sam Zhao</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-59912650-3",'auto');ga('send','pageview');</script></body></html>